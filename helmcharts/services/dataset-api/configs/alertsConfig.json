{
  "configs": {
    "alerts": {
      "dataset_metrics_flink": [
        {
          "metric": "sum(sum_over_time(flink_taskmanager_job_task_operator_ExtractorJob_dataset_id_extractor_failed_count[5m])) + sum(sum_over_time(flink_taskmanager_job_task_operator_ExtractorJob_dataset_id_extractor_duplicate_count[5m])) + sum(sum_over_time(flink_taskmanager_job_task_operator_PipelinePreprocessorJob_dataset_id_validator_failed_count[5m]))",
          "alias": "[DATASET]: Detected high rate of invalid data than expected",
          "category": "Processing",
          "severity": "critical",
          "code": "PROCESS_DATASET_002",
          "description": "A high rate of invalid data can disrupt processing pipeline reduce data quality and lead to inaccurate insights in downstream analytics and reporting",
          "frequency": "5m",
          "interval": "5m",
          "operator": "gt",
          "threshold": 0
        },
        {
          "metric": "sum(sum_over_time(flink_taskmanager_job_task_operator_PipelinePreprocessorJob_dataset_id_dedup_failed_count[5m]))",
          "alias": "[DATASET]: Detected higher rate of duplicate data than expected",
          "category": "Processing",
          "severity": "warning",
          "code": "PROCESS_DATASET_003",
          "description": "A higher rate of duplicate data can inflate storage usage and impact the accuracy of reports and downstream data processing.",
          "frequency": "5m",
          "interval": "5m",
          "operator": "gt",
          "threshold": 0
        },
        {
          "metric": "sum(sum_over_time(flink_taskmanager_job_task_operator_DenormalizerJob_dataset_id_denorm_failed[5m])) + sum(sum_over_time(flink_taskmanager_job_task_operator_DenormalizerJob_dataset_id_denorm_partial_success[5m]))",
          "alias": "[DATASET]: Detected higher incidence of failures during data enrichment.",
          "category": "Processing",
          "severity": "critical",
          "code": "PROCESS_DATASET_004",
          "description": "Frequent data enrichment failures can cause incomplete data and affect downstream analytics accuracy.",
          "frequency": "5m",
          "interval": "5m",
          "operator": "gt",
          "threshold": 0
        },
        {
          "metric": "sum(sum_over_time(flink_taskmanager_job_task_operator_TransformerJob_dataset_id_transform_failed_count[5m])) + sum(sum_over_time(flink_taskmanager_job_task_operator_TransformerJob_dataset_id_transform_partial_count[5m]))",
          "alias": "[DATASET]: Detected higher incidence of failures during data transformations.",
          "category": "Processing",
          "severity": "critical",
          "code": "PROCESS_DATASET_005",
          "description": "Frequent transformation failures can lead to unmasked or unencrypted data risking data security and analytics reliability",
          "frequency": "5m",
          "interval": "5m",
          "operator": "gt",
          "threshold": 0
        },
        {
          "metric": "sum(sum_over_time(flink_taskmanager_job_task_operator_PipelinePreprocessorJob_dataset_id_validator_total_count[$__range]))",
          "alias": "[DATASET]: No data has been received for the past hour.",
          "category": "Processing",
          "flattened": true,
          "severity": "warning",
          "code": "PROCESS_UNIFIED_PIPELINE_010",
          "description": "The dataset hasn’t received any new data for the past hour, which may affect the querying of the new data.",
          "summary": "The dataset has not received any new data, which will impact real-time data processing",
          "frequency": "5m",
          "interval": "1h",
          "operator": "lt",
          "threshold": 1
        }
      ],
      "dataset_metrics_druid": [
        {
          "metric": "max(druid_supervisors{supervisor_name=\"dataset_id\", state=\"RUNNING\"} or (0 * absent(druid_supervisors{supervisor_name=\"dataset_id\", state=\"RUNNING\"})))",
          "alias": "[DATASET]: Druid supervisor is in an unhealthy state",
          "category": "Querying",
          "severity": "critical",
          "code": "QUERY_DRUID_INDEXER_009",
          "description": "The dataset is unhealthy, and no new data has been available for querying since the system encountered the issue.",
          "summary": "The associated Druid Supervisor is in an unhealthy state, preventing druid ingestion tasks from running. As a result, real-time data cannot be queried.",
          "frequency": "5m",
          "interval": "5m",
          "operator": "lt",
          "threshold": 1
        },
        {
          "metric": "druid_ingest_events_unparseable_total{dataSource=\"dataset_id\"}",
          "alias": "[DATASET]: Detected higher amount of unparseable data.",
          "flattened": true,
          "category": "Querying",
          "severity": "critical",
          "code": "QUERY_DRUID_INDEXER_008",
          "description": "The dataset is unhealthy, and the query results may be incorrect",
          "summary": "Unparseable data has been detected in the system, preventing it from being processed. Henceforth, queries on this dataset may not return accurate data until the issue is resolved.",
          "frequency": "5m",
          "interval": "5m",
          "operator": "gt",
          "threshold": 0
        },
        {
          "metric": "druid_ingest_kafka_lag{dataSource=\"dataset_id\"}",
          "alias": "[DATASET]: Detected higher amount of query lag than expected.",
          "category": "Querying",
          "flattened": true,
          "severity": "critical",
          "code": "QUERY_DRUID_INDEXER_007",
          "description": "A large amount of data is still waiting to be processed. This may cause delays in querying the most recent data",
          "summary": "High indexer lag in the dataset indicates processing of new data is delayed. Because of this delay, new data isn’t available when querying the dataset.",
          "frequency": "5m",
          "interval": "1h",
          "operator": "gt",
          "threshold": 5000000
        },
        {
          "metric": "druid_ingest_kafka_lag{dataSource=\"dataset_id\"}",
          "alias": "[DATASET]: Druid Supervisor Ingestion Failure Due to Offsets.",
          "category": "Querying",
          "flattened": true,
          "severity": "critical",
          "code": "QUERY_DRUID_INDEXER_012",
          "description": "The dataset is unhealthy, and no new data has been available for querying since the issue occurred",
          "summary": "The supervisor is experiencing a negative offset, preventing it from ingesting new data. As a result, real-time data is unavailable for querying.",
          "frequency": "5m",
          "interval": "5m",
          "operator": "lt",
          "threshold": 0
        }
      ],
      "query_metric": []
    }
  }
}